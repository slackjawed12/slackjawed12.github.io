<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/c9a5bc6a7c948fb0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/f2507fe9a69c6606.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-8245b13a1499d92e.js" crossorigin=""/><script src="/_next/static/chunks/fd9d1056-37d0d0abc9e71e90.js" async="" crossorigin=""></script><script src="/_next/static/chunks/69-ded5788220194a2a.js" async="" crossorigin=""></script><script src="/_next/static/chunks/main-app-eb5b0c2be6bd65a1.js" async="" crossorigin=""></script><script src="/_next/static/chunks/app/posts/%5B...slug%5D/page-4ea92d700db888a1.js" async=""></script><script src="/_next/static/chunks/250-019060243e3dae58.js" async=""></script><script src="/_next/static/chunks/app/page-fb028b9d70e7881b.js" async=""></script><script src="/_next/static/chunks/app/layout-7274d9ef7d2d1f9f.js" async=""></script><title>외부 서비스 포인트 연동 시 트랜잭션</title><meta name="description" content="It covers development stories, and technical stories."/><meta name="naver-site-verification" content="17edbe88d0eda099c70da8802de4604567027c70"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script></head><body class="__className_aaf875 mx-auto max-w-3xl px-6 min-h-full h-auto sm:max-w-6xl sm:px-8"><header><div class="pt-8 flex justify-between"><a href="/"><h1>개발자 이민재입니다.</h1></a><a href="/posts"><span>POSTS</span></a></div><div class="my-8 border border-solid border-slate-500"></div></header><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><article class="prose prose-sm mx-auto max-w-3xl pt-8 dark:prose-invert sm:prose-base lg:prose-lg"><div class="mb-1"><h1 class="text-center">외부 서비스 포인트 연동 시 트랜잭션</h1><div class="align-center flex justify-center gap-5"><time dateTime="2024-04-10T00:00:00.000Z" class="my-auto">April 10, 2024</time><p class="">3<!-- -->min read</p></div></div><h3>Overview</h3>
<p>    회사에서 기존 외부 협력사와 포인트를 연동해서 거래하는 서비스가 구축되어 있었습니다.
그런데 DB에 순간적으로 부하가 걸려 커넥션이 부족해지면 트랜잭션 요건을 만족하지 않는 장애가 발생했습니다.
외부 협력사의 포인트는 사용처리가 됐는데, 회사 DB에 기록되지 않는 것이었습니다.
반대로 협력사 네트워크의 오류가 발생한 경우에는 어떤 데이터도 기록되지 않아 트랜잭션의 불일치 문제는 없었습니다.</p>
<h3>문제점</h3>
<p>    결론부터 말하면, DB 장애 발생 시 예외처리 부분에서 포인트 사용 취소 처리와 관련된 사항이 구현되어있지 않았습니다.
간단한 예시 코드는 아래와 같습니다.</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#22272e;color:#adbac7" tabindex="0" data-language="javascript" data-theme="github-dark-dimmed"><code data-language="javascript" data-theme="github-dark-dimmed" style="display:grid" class="code-highlight"><span class="code-line"><span data-line=""><span style="color:#768390">// ----- before -----</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#F47067">class</span><span style="color:#F69D50"> PointTransactionService</span><span style="color:#ADBAC7"> {</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#768390">  // ...</span></span>
</span><span class="code-line"><span data-line=""> </span>
</span><span class="code-line"><span data-line=""><span style="color:#768390">  // 외부 협력사 포인트로 구매</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#DCBDFB">  buyWithPoint</span><span style="color:#ADBAC7">(</span><span style="color:#F69D50">order</span><span style="color:#ADBAC7">) {</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#F47067">    const</span><span style="color:#6CB6FF"> tx</span><span style="color:#F47067"> =</span><span style="color:#ADBAC7"> db.</span><span style="color:#DCBDFB">transaction</span><span style="color:#ADBAC7">();</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#F47067">    try</span><span style="color:#ADBAC7"> {</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#DCBDFB">      validateOrder</span><span style="color:#ADBAC7">(order, tx);</span></span>
</span><span class="code-line"><span data-line=""> </span>
</span><span class="code-line"><span data-line=""><span style="color:#F47067">      const</span><span style="color:#6CB6FF"> restResult</span><span style="color:#F47067"> =</span><span style="color:#DCBDFB"> requestPointUse</span><span style="color:#ADBAC7">(</span><span style="color:#6CB6FF">this</span><span style="color:#ADBAC7">.useUrl, order.pointAmount);</span></span>
</span><span class="code-line"><span data-line=""> </span>
</span><span class="code-line"><span data-line=""><span style="color:#DCBDFB">      buy</span><span style="color:#ADBAC7">(order, tx);</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#ADBAC7">    } </span><span style="color:#F47067">catch</span><span style="color:#ADBAC7"> (error) {</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#768390">      // 장애 처리 - 트랜잭션 롤백, 모니터링 시스템에 전달하거나 알림 발생</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#ADBAC7">      tx.</span><span style="color:#DCBDFB">rollback</span><span style="color:#ADBAC7">();</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#DCBDFB">      alertError</span><span style="color:#ADBAC7">(error);</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#ADBAC7">    }</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#ADBAC7">  }</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#ADBAC7">}</span></span></span></code></pre></figure>
<p>    이 경우에 buy Transaction에서 DB 오류로 예외가 발생하면 requestPointUse가 이미 처리되었으므로 데이터 불일치가 발생합니다.
제가 해결했던 방법은 다음과 같습니다.</p>
<ol>
<li>DB 트랜잭션 범위에서 API 호출을 분리해서, 트랜잭션 이전에 API 호출이 발생하도록 합니다.</li>
<li>DB에서 예외 발생 시 외부 협력사에서 제공받은 <strong>취소 API를 호출</strong>합니다.</li>
</ol>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#22272e;color:#adbac7" tabindex="0" data-language="javascript" data-theme="github-dark-dimmed"><code data-language="javascript" data-theme="github-dark-dimmed" style="display:grid" class="code-highlight"><span class="code-line"><span data-line=""><span style="color:#768390">// ----- after -----</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#F47067">class</span><span style="color:#F69D50"> PointTransactionService</span><span style="color:#ADBAC7"> {</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#768390">  // ...</span></span>
</span><span class="code-line"><span data-line=""> </span>
</span><span class="code-line"><span data-line=""><span style="color:#768390">  // 외부 협력사 포인트로 구매</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#F47067">  async</span><span style="color:#DCBDFB"> buyWithPoint</span><span style="color:#ADBAC7">(</span><span style="color:#F69D50">order</span><span style="color:#ADBAC7">, </span><span style="color:#F69D50">user</span><span style="color:#ADBAC7">) {</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#F47067">    const</span><span style="color:#6CB6FF"> restResult</span><span style="color:#F47067"> =</span><span style="color:#DCBDFB"> requestPointUse</span><span style="color:#ADBAC7">(</span><span style="color:#6CB6FF">this</span><span style="color:#ADBAC7">.useUrl, order.pointAmount);</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#F47067">    try</span><span style="color:#ADBAC7"> {</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#DCBDFB">      buyTransaction</span><span style="color:#ADBAC7">(order);</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#ADBAC7">    } </span><span style="color:#F47067">catch</span><span style="color:#ADBAC7"> (error) {</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#DCBDFB">      requestCancelPointUse</span><span style="color:#ADBAC7">(</span><span style="color:#6CB6FF">this</span><span style="color:#ADBAC7">.cancelUrl, restResult.uniqueId);</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#DCBDFB">      alertError</span><span style="color:#ADBAC7">(error);</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#ADBAC7">    }</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#ADBAC7">  }</span></span>
</span><span class="code-line"><span data-line=""> </span>
</span><span class="code-line"><span data-line=""><span style="color:#DCBDFB">  buyTransaction</span><span style="color:#ADBAC7">(</span><span style="color:#F69D50">order</span><span style="color:#F47067">:</span><span style="color:#F69D50"> Order</span><span style="color:#ADBAC7">) {</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#F47067">    const</span><span style="color:#6CB6FF"> tx</span><span style="color:#F47067"> =</span><span style="color:#ADBAC7"> db.</span><span style="color:#DCBDFB">transaction</span><span style="color:#ADBAC7">();</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#F47067">    try</span><span style="color:#ADBAC7"> {</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#DCBDFB">      validateOrder</span><span style="color:#ADBAC7">(order, tx);</span></span>
</span><span class="code-line"><span data-line=""> </span>
</span><span class="code-line"><span data-line=""><span style="color:#DCBDFB">      buy</span><span style="color:#ADBAC7">(order, tx);</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#ADBAC7">    } </span><span style="color:#F47067">catch</span><span style="color:#ADBAC7"> (error) {</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#ADBAC7">      tx.</span><span style="color:#DCBDFB">rollback</span><span style="color:#ADBAC7">();</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#F47067">      throw</span><span style="color:#F47067"> new</span><span style="color:#DCBDFB"> DatabaseError</span><span style="color:#ADBAC7">(</span><span style="color:#96D0FF">&quot;transaction error&quot;</span><span style="color:#ADBAC7">);</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#ADBAC7">    }</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#ADBAC7">  }</span></span>
</span><span class="code-line"><span data-line=""><span style="color:#ADBAC7">}</span></span></span></code></pre></figure>
<h3>생각할 점</h3>
<p>    before 코드에는 또 다른 문제가 있습니다.
API 호출이 트랜잭션 범위에 있으므로, API에서 장애가 발생해서 응답시간이 느려지면 커넥션이 고갈될 수 있다는 것이었습니다.
after 코드도 여전히 API의 응답 속도 문제를 완전히 해결한 것은 아닙니다.
아래 최범균님 영상을 통해서 이런 경우 API의 응답 속도 개선하는 여러 방안을 알 수 있었습니다.</p>
<h3>References</h3>
<p><a href="https://www.youtube.com/watch?v=xc0tnJVGQEw" rel="noopener noreferrer" target="_blank">최범균님 유튜브 영상</a></p><section></section></article><footer class="py-5 relative translate-y-full"><div class="flex flex-row space-x-2 mb-1"><a href="https://github.com/slackjawed12"><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a href="https://linkedin.com/in/minjae-lee-6851592a0"><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a></div><div class="flex justify-start"><a class="text-sm sm:text-base" href="/">© <!-- -->2023-2024<!-- --> Lee MinJae blog </a><span class="text-sm sm:text-base">Powered By </span><span class="text-sm sm:text-base">Next.js</span></div></footer><script src="/_next/static/chunks/webpack-8245b13a1499d92e.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/c9a5bc6a7c948fb0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/f2507fe9a69c6606.css\",\"style\",{\"crossOrigin\":\"\"}]\n0:\"$L3\"\n"])</script><script>self.__next_f.push([1,"4:I[7690,[],\"\"]\n6:I[1142,[\"49\",\"static/chunks/app/posts/%5B...slug%5D/page-4ea92d700db888a1.js\"],\"\"]\n7:I[5613,[],\"\"]\n9:I[1778,[],\"\"]\na:I[5250,[\"250\",\"static/chunks/250-019060243e3dae58.js\",\"931\",\"static/chunks/app/page-fb028b9d70e7881b.js\"],\"\"]\nb:I[4840,[\"250\",\"static/chunks/250-019060243e3dae58.js\",\"185\",\"static/chunks/app/layout-7274d9ef7d2d1f9f.js\"],\"Providers\"]\nd:I[8955,[],\"\"]\n8:[\"slug\",\"dev/point-transaction\",\"c\"]\ne:[]\n"])</script><script>self.__next_f.push([1,"3:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/f2507fe9a69c6606.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]],[\"$\",\"$L4\",null,{\"buildId\":\"K_J6xgnznkxVCkmOF827s\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/posts/dev/point-transaction\",\"initialTree\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"dev/point-transaction\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"dev\\\",\\\"point-transaction\\\"]}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"dev/point-transaction\",\"c\"],{\"children\":[\"__PAGE__\",{},[\"$L5\",[\"$\",\"article\",null,{\"className\":\"prose prose-sm mx-auto max-w-3xl pt-8 dark:prose-invert sm:prose-base lg:prose-lg\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-1\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-center\",\"children\":\"외부 서비스 포인트 연동 시 트랜잭션\"}],[\"$\",\"div\",null,{\"className\":\"align-center flex justify-center gap-5\",\"children\":[[\"$\",\"time\",null,{\"dateTime\":\"2024-04-10T00:00:00.000Z\",\"className\":\"my-auto\",\"children\":\"April 10, 2024\"}],[\"$\",\"p\",null,{\"className\":\"\",\"children\":[3,\"min read\"]}]]}]]}],[[\"$\",\"h3\",null,{\"children\":\"Overview\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"    회사에서 기존 외부 협력사와 포인트를 연동해서 거래하는 서비스가 구축되어 있었습니다.\\n그런데 DB에 순간적으로 부하가 걸려 커넥션이 부족해지면 트랜잭션 요건을 만족하지 않는 장애가 발생했습니다.\\n외부 협력사의 포인트는 사용처리가 됐는데, 회사 DB에 기록되지 않는 것이었습니다.\\n반대로 협력사 네트워크의 오류가 발생한 경우에는 어떤 데이터도 기록되지 않아 트랜잭션의 불일치 문제는 없었습니다.\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"문제점\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"    결론부터 말하면, DB 장애 발생 시 예외처리 부분에서 포인트 사용 취소 처리와 관련된 사항이 구현되어있지 않았습니다.\\n간단한 예시 코드는 아래와 같습니다.\"}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"backgroundColor\":\"#22272e\",\"color\":\"#adbac7\"},\"tabIndex\":\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark-dimmed\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark-dimmed\",\"style\":{\"display\":\"grid\"},\"className\":\"code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#768390\"},\"children\":\"// ----- before -----\"}]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F47067\"},\"children\":\"class\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F69D50\"},\"children\":\" PointTransactionService\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\" {\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#768390\"},\"children\":\"  // ...\"}]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#768390\"},\"children\":\"  // 외부 협력사 포인트로 구매\"}]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCBDFB\"},\"children\":\"  buyWithPoint\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F69D50\"},\"children\":\"order\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\") {\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F47067\"},\"children\":\"    const\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#6CB6FF\"},\"children\":\" tx\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F47067\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\" db.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCBDFB\"},\"children\":\"transaction\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"();\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F47067\"},\"children\":\"    try\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\" {\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCBDFB\"},\"children\":\"      validateOrder\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"(order, tx);\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F47067\"},\"children\":\"      const\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#6CB6FF\"},\"children\":\" restResult\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F47067\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCBDFB\"},\"children\":\" requestPointUse\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#6CB6FF\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\".useUrl, order.pointAmount);\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCBDFB\"},\"children\":\"      buy\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"(order, tx);\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"    } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F47067\"},\"children\":\"catch\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\" (error) {\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#768390\"},\"children\":\"      // 장애 처리 - 트랜잭션 롤백, 모니터링 시스템에 전달하거나 알림 발생\"}]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"      tx.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCBDFB\"},\"children\":\"rollback\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"();\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCBDFB\"},\"children\":\"      alertError\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"(error);\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"    }\"}]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"  }\"}]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"}\"}]}]}]]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"    이 경우에 buy Transaction에서 DB 오류로 예외가 발생하면 requestPointUse가 이미 처리되었으므로 데이터 불일치가 발생합니다.\\n제가 해결했던 방법은 다음과 같습니다.\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"DB 트랜잭션 범위에서 API 호출을 분리해서, 트랜잭션 이전에 API 호출이 발생하도록 합니다.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"DB에서 예외 발생 시 외부 협력사에서 제공받은 \",[\"$\",\"strong\",null,{\"children\":\"취소 API를 호출\"}],\"합니다.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"backgroundColor\":\"#22272e\",\"color\":\"#adbac7\"},\"tabIndex\":\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark-dimmed\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark-dimmed\",\"style\":{\"display\":\"grid\"},\"className\":\"code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#768390\"},\"children\":\"// ----- after -----\"}]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F47067\"},\"children\":\"class\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F69D50\"},\"children\":\" PointTransactionService\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\" {\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#768390\"},\"children\":\"  // ...\"}]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#768390\"},\"children\":\"  // 외부 협력사 포인트로 구매\"}]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F47067\"},\"children\":\"  async\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCBDFB\"},\"children\":\" buyWithPoint\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F69D50\"},\"children\":\"order\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F69D50\"},\"children\":\"user\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\") {\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F47067\"},\"children\":\"    const\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#6CB6FF\"},\"children\":\" restResult\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F47067\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCBDFB\"},\"children\":\" requestPointUse\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#6CB6FF\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\".useUrl, order.pointAmount);\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F47067\"},\"children\":\"    try\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\" {\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCBDFB\"},\"children\":\"      buyTransaction\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"(order);\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"    } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F47067\"},\"children\":\"catch\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\" (error) {\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCBDFB\"},\"children\":\"      requestCancelPointUse\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#6CB6FF\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\".cancelUrl, restResult.uniqueId);\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCBDFB\"},\"children\":\"      alertError\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"(error);\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"    }\"}]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"  }\"}]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCBDFB\"},\"children\":\"  buyTransaction\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F69D50\"},\"children\":\"order\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F47067\"},\"children\":\":\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F69D50\"},\"children\":\" Order\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\") {\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F47067\"},\"children\":\"    const\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#6CB6FF\"},\"children\":\" tx\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F47067\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\" db.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCBDFB\"},\"children\":\"transaction\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"();\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F47067\"},\"children\":\"    try\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\" {\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCBDFB\"},\"children\":\"      validateOrder\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"(order, tx);\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCBDFB\"},\"children\":\"      buy\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"(order, tx);\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"    } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F47067\"},\"children\":\"catch\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\" (error) {\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"      tx.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCBDFB\"},\"children\":\"rollback\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"();\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F47067\"},\"children\":\"      throw\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F47067\"},\"children\":\" new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#DCBDFB\"},\"children\":\" DatabaseError\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#96D0FF\"},\"children\":\"\\\"transaction error\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\");\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"    }\"}]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"  }\"}]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#ADBAC7\"},\"children\":\"}\"}]}]}]]}]}]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"생각할 점\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"    before 코드에는 또 다른 문제가 있습니다.\\nAPI 호출이 트랜잭션 범위에 있으므로, API에서 장애가 발생해서 응답시간이 느려지면 커넥션이 고갈될 수 있다는 것이었습니다.\\nafter 코드도 여전히 API의 응답 속도 문제를 완전히 해결한 것은 아닙니다.\\n아래 최범균님 영상을 통해서 이런 경우 API의 응답 속도 개선하는 여러 방안을 알 수 있었습니다.\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"References\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://www.youtube.com/watch?v=xc0tnJVGQEw\",\"rel\":\"noopener noreferrer\",\"target\":\"_blank\",\"children\":\"최범균님 유튜브 영상\"}]}]],[\"$\",\"$L6\",null,{}]]}],null]]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",\"$8\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]]},[null,[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__className_aaf875 mx-auto max-w-3xl px-6 min-h-full h-auto sm:max-w-6xl sm:px-8\",\"children\":[[\"$\",\"header\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"pt-8 flex justify-between\",\"children\":[[\"$\",\"$La\",null,{\"href\":\"/\",\"children\":[\"$\",\"h1\",null,{\"children\":\"개발자 이민재입니다.\"}]}],[\"$\",\"$La\",null,{\"href\":\"/posts\",\"children\":[\"$\",\"span\",null,{\"children\":\"POSTS\"}]}]]}],[\"$\",\"div\",null,{\"className\":\"my-8 border border-solid border-slate-500\"}]]}],[\"$\",\"$Lb\",null,{\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}]}],[\"$\",\"footer\",null,{\"className\":\"py-5 relative translate-y-full\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex flex-row space-x-2 mb-1\",\"children\":[[\"$\",\"a\",null,{\"href\":\"https://github.com/slackjawed12\",\"children\":[\"$\",\"svg\",null,{\"role\":\"img\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 24 24\",\"fill\":\"currentColor\",\"className\":\"$undefined\",\"width\":18,\"height\":18,\"children\":[[\"$\",\"title\",null,{\"children\":\"GitHub\"}],[\"$\",\"path\",null,{\"d\":\"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12\"}]]}]}],[\"$\",\"a\",null,{\"href\":\"https://linkedin.com/in/minjae-lee-6851592a0\",\"children\":[\"$\",\"svg\",null,{\"role\":\"img\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 24 24\",\"fill\":\"currentColor\",\"className\":\"$undefined\",\"width\":18,\"height\":18,\"children\":[[\"$\",\"title\",null,{\"children\":\"LinkedIn\"}],[\"$\",\"path\",null,{\"d\":\"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z\"}]]}]}]]}],[\"$\",\"div\",null,{\"className\":\"flex justify-start\",\"children\":[[\"$\",\"$La\",null,{\"href\":\"/\",\"className\":\"text-sm sm:text-base\",\"children\":[\"© \",\"2023-2024\",\" Lee MinJae blog \"]}],[\"$\",\"span\",null,{\"className\":\"text-sm sm:text-base\",\"children\":\"Powered By \"}],[\"$\",\"span\",null,{\"className\":\"text-sm sm:text-base\",\"children\":\"Next.js\"}]]}]]}]]}]}],null]],\"initialHead\":[false,\"$Lc\"],\"globalErrorComponent\":\"$d\",\"missingSlots\":\"$We\"}]]\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"외부 서비스 포인트 연동 시 트랜잭션\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"It covers development stories, and technical stories.\"}],[\"$\",\"meta\",\"4\",{\"name\":\"naver-site-verification\",\"content\":\"17edbe88d0eda099c70da8802de4604567027c70\"}],[\"$\",\"meta\",\"5\",{\"name\":\"next-size-adjust\"}]]\n5:null\n"])</script><script>self.__next_f.push([1,""])</script></body></html>